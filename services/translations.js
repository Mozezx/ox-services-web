// Service Pages Translation System
const serviceTranslations = {
    // Navigation
    nav: {
        en: { home: 'Home', services: 'Services', portfolio: 'Portfolio', contact: 'Contact', getQuote: 'Get a Quote' },
        nl: { home: 'Home', services: 'Diensten', portfolio: 'Portfolio', contact: 'Contact', getQuote: 'Offerte Aanvragen' },
        es: { home: 'Inicio', services: 'Servicios', portfolio: 'Portafolio', contact: 'Contacto', getQuote: 'Solicitar Cotización' },
        fr: { home: 'Accueil', services: 'Services', portfolio: 'Portfolio', contact: 'Contact', getQuote: 'Demander un Devis' }
    },

    // Common
    common: {
        en: { learnMore: 'Learn More', backToHome: 'Back to Home', viewProjects: 'View Projects', requestQuote: 'Request a Free Quote', whyChooseUs: 'Why Choose Us', ourProcess: 'Our Process', benefits: 'Benefits', features: 'Key Features' },
        nl: { learnMore: 'Meer Info', backToHome: 'Terug naar Home', viewProjects: 'Bekijk Projecten', requestQuote: 'Vraag een Gratis Offerte Aan', whyChooseUs: 'Waarom Ons Kiezen', ourProcess: 'Ons Proces', benefits: 'Voordelen', features: 'Belangrijkste Kenmerken' },
        es: { learnMore: 'Más Información', backToHome: 'Volver al Inicio', viewProjects: 'Ver Proyectos', requestQuote: 'Solicitar Cotización Gratuita', whyChooseUs: 'Por Qué Elegirnos', ourProcess: 'Nuestro Proceso', benefits: 'Beneficios', features: 'Características Clave' },
        fr: { learnMore: 'En Savoir Plus', backToHome: 'Retour à l\'Accueil', viewProjects: 'Voir les Projets', requestQuote: 'Demander un Devis Gratuit', whyChooseUs: 'Pourquoi Nous Choisir', ourProcess: 'Notre Processus', benefits: 'Avantages', features: 'Caractéristiques Clés' }
    },

    // Solar Page
    solar: {
        en: {
            title: 'Solar PV Systems',
            subtitle: 'High-Performance Solar Energy Solutions',
            description: 'Transform your property with our premium solar PV installations. We deliver cutting-edge renewable energy systems that reduce costs and environmental impact.',
            heroTitle: 'Power Your Future with Solar',
            heroSubtitle: 'Premium solar installations for residential and commercial properties',
            benefit1Title: 'Cost Savings',
            benefit1Desc: 'Reduce your electricity bills by up to 70% with our high-efficiency solar panels.',
            benefit2Title: 'Eco-Friendly',
            benefit2Desc: 'Reduce your carbon footprint and contribute to a sustainable future.',
            benefit3Title: '25-Year Warranty',
            benefit3Desc: 'Industry-leading warranty coverage for complete peace of mind.',
            benefit4Title: 'Expert Installation',
            benefit4Desc: 'Professional installation by certified technicians with years of experience.',
            process1: 'Site Assessment',
            process1Desc: 'We evaluate your property to design the optimal solar solution.',
            process2: 'Custom Design',
            process2Desc: 'Tailored system design maximizing energy output for your needs.',
            process3: 'Professional Installation',
            process3Desc: 'Expert installation with minimal disruption to your daily routine.',
            process4: 'Ongoing Support',
            process4Desc: 'Comprehensive maintenance and monitoring services.',
            ctaTitle: 'Ready to Go Solar?',
            ctaSubtitle: 'Get a free consultation and quote for your solar installation project.',
        },
        nl: {
            title: 'Zonne-energie Systemen',
            subtitle: 'Hoogwaardige Zonne-energie Oplossingen',
            description: 'Transformeer uw eigendom met onze premium zonne-PV installaties. Wij leveren geavanceerde hernieuwbare energiesystemen die kosten en milieu-impact verminderen.',
            heroTitle: 'Kracht voor Uw Toekomst met Zonne-energie',
            heroSubtitle: 'Premium zonne-installaties voor residentiële en commerciële panden',
            benefit1Title: 'Kostenbesparing',
            benefit1Desc: 'Verlaag uw elektriciteitsrekening tot 70% met onze hoog-efficiënte zonnepanelen.',
            benefit2Title: 'Milieuvriendelijk',
            benefit2Desc: 'Verminder uw CO2-voetafdruk en draag bij aan een duurzame toekomst.',
            benefit3Title: '25 Jaar Garantie',
            benefit3Desc: 'Toonaangevende garantiedekking voor volledige gemoedsrust.',
            benefit4Title: 'Vakkundige Installatie',
            benefit4Desc: 'Professionele installatie door gecertificeerde technici met jarenlange ervaring.',
            process1: 'Locatiebeoordeling',
            process1Desc: 'Wij evalueren uw eigendom om de optimale zonne-oplossing te ontwerpen.',
            process2: 'Maatwerk Ontwerp',
            process2Desc: 'Op maat gemaakt systeemontwerp dat de energieopbrengst maximaliseert.',
            process3: 'Professionele Installatie',
            process3Desc: 'Vakkundige installatie met minimale verstoring van uw dagelijkse routine.',
            process4: 'Voortdurende Ondersteuning',
            process4Desc: 'Uitgebreide onderhouds- en monitoringdiensten.',
            ctaTitle: 'Klaar voor Zonne-energie?',
            ctaSubtitle: 'Ontvang een gratis adviesgesprek en offerte voor uw zonne-installatieproject.',
        },
        es: {
            title: 'Sistemas Solares Fotovoltaicos',
            subtitle: 'Soluciones de Energía Solar de Alto Rendimiento',
            description: 'Transforme su propiedad con nuestras instalaciones solares fotovoltaicas premium. Entregamos sistemas de energía renovable de vanguardia que reducen costos e impacto ambiental.',
            heroTitle: 'Impulse Su Futuro con Energía Solar',
            heroSubtitle: 'Instalaciones solares premium para propiedades residenciales y comerciales',
            benefit1Title: 'Ahorro de Costos',
            benefit1Desc: 'Reduzca sus facturas de electricidad hasta un 70% con nuestros paneles solares de alta eficiencia.',
            benefit2Title: 'Ecológico',
            benefit2Desc: 'Reduzca su huella de carbono y contribuya a un futuro sostenible.',
            benefit3Title: 'Garantía de 25 Años',
            benefit3Desc: 'Cobertura de garantía líder en la industria para total tranquilidad.',
            benefit4Title: 'Instalación Experta',
            benefit4Desc: 'Instalación profesional por técnicos certificados con años de experiencia.',
            process1: 'Evaluación del Sitio',
            process1Desc: 'Evaluamos su propiedad para diseñar la solución solar óptima.',
            process2: 'Diseño Personalizado',
            process2Desc: 'Diseño de sistema a medida maximizando la producción de energía.',
            process3: 'Instalación Profesional',
            process3Desc: 'Instalación experta con mínima interrupción de su rutina diaria.',
            process4: 'Soporte Continuo',
            process4Desc: 'Servicios integrales de mantenimiento y monitoreo.',
            ctaTitle: '¿Listo para la Energía Solar?',
            ctaSubtitle: 'Obtenga una consulta y cotización gratuita para su proyecto de instalación solar.',
        },
        fr: {
            title: 'Systèmes Solaires Photovoltaïques',
            subtitle: 'Solutions d\'Énergie Solaire Haute Performance',
            description: 'Transformez votre propriété avec nos installations solaires photovoltaïques premium. Nous fournissons des systèmes d\'énergie renouvelable de pointe qui réduisent les coûts et l\'impact environnemental.',
            heroTitle: 'Alimentez Votre Avenir avec le Solaire',
            heroSubtitle: 'Installations solaires premium pour propriétés résidentielles et commerciales',
            benefit1Title: 'Économies de Coûts',
            benefit1Desc: 'Réduisez vos factures d\'électricité jusqu\'à 70% avec nos panneaux solaires haute efficacité.',
            benefit2Title: 'Écologique',
            benefit2Desc: 'Réduisez votre empreinte carbone et contribuez à un avenir durable.',
            benefit3Title: 'Garantie 25 Ans',
            benefit3Desc: 'Couverture de garantie leader de l\'industrie pour une tranquillité totale.',
            benefit4Title: 'Installation Experte',
            benefit4Desc: 'Installation professionnelle par des techniciens certifiés avec des années d\'expérience.',
            process1: 'Évaluation du Site',
            process1Desc: 'Nous évaluons votre propriété pour concevoir la solution solaire optimale.',
            process2: 'Conception Sur Mesure',
            process2Desc: 'Conception de système personnalisée maximisant la production d\'énergie.',
            process3: 'Installation Professionnelle',
            process3Desc: 'Installation experte avec perturbation minimale de votre routine quotidienne.',
            process4: 'Support Continu',
            process4Desc: 'Services complets de maintenance et de surveillance.',
            ctaTitle: 'Prêt Pour le Solaire?',
            ctaSubtitle: 'Obtenez une consultation et un devis gratuits pour votre projet d\'installation solaire.',
        }
    },

    // Roofing Page
    roofing: {
        en: {
            title: 'EPDM Rubber Roofing',
            subtitle: 'Industrial-Grade Waterproofing Solutions',
            description: 'Protect your property with our premium EPDM rubber membrane roofing. Offering 50+ years of durability and complete waterproof protection.',
            heroTitle: 'Ultimate Roof Protection',
            heroSubtitle: 'EPDM rubber membrane for lasting durability',
            benefit1Title: '50-Year Lifespan',
            benefit1Desc: 'Industry-leading durability with minimal maintenance requirements.',
            benefit2Title: 'Complete Waterproofing',
            benefit2Desc: 'Seamless membrane technology eliminates leak points.',
            benefit3Title: 'Weather Resistant',
            benefit3Desc: 'Withstands extreme temperatures, UV rays, and harsh weather.',
            benefit4Title: 'Eco-Friendly Material',
            benefit4Desc: '100% recyclable and environmentally responsible.',
            ctaTitle: 'Protect Your Property',
            ctaSubtitle: 'Get a free assessment for your roofing project.',
        },
        nl: {
            title: 'EPDM Rubber Dakbedekking',
            subtitle: 'Industriële Waterdichtingsoplossingen',
            description: 'Bescherm uw eigendom met onze premium EPDM rubbermembraan dakbedekking. Met 50+ jaar duurzaamheid en volledige waterdichte bescherming.',
            heroTitle: 'Ultieme Dakbescherming',
            heroSubtitle: 'EPDM rubbermembraan voor blijvende duurzaamheid',
            benefit1Title: '50 Jaar Levensduur',
            benefit1Desc: 'Toonaangevende duurzaamheid met minimale onderhoudsvereisten.',
            benefit2Title: 'Volledige Waterdichting',
            benefit2Desc: 'Naadloze membraantechnologie elimineert lekpunten.',
            benefit3Title: 'Weerbestendig',
            benefit3Desc: 'Bestand tegen extreme temperaturen, UV-straling en zwaar weer.',
            benefit4Title: 'Milieuvriendelijk Materiaal',
            benefit4Desc: '100% recyclebaar en milieuverantwoordelijk.',
            ctaTitle: 'Bescherm Uw Eigendom',
            ctaSubtitle: 'Ontvang een gratis beoordeling voor uw dakproject.',
        },
        es: {
            title: 'Techos de Caucho EPDM',
            subtitle: 'Soluciones de Impermeabilización Industrial',
            description: 'Proteja su propiedad con nuestra membrana de caucho EPDM premium. Ofreciendo 50+ años de durabilidad y protección impermeable completa.',
            heroTitle: 'Protección Definitiva para Techos',
            heroSubtitle: 'Membrana de caucho EPDM para durabilidad duradera',
            benefit1Title: 'Vida Útil de 50 Años',
            benefit1Desc: 'Durabilidad líder en la industria con requisitos mínimos de mantenimiento.',
            benefit2Title: 'Impermeabilización Completa',
            benefit2Desc: 'Tecnología de membrana sin costuras elimina puntos de fuga.',
            benefit3Title: 'Resistente a la Intemperie',
            benefit3Desc: 'Resiste temperaturas extremas, rayos UV y clima severo.',
            benefit4Title: 'Material Ecológico',
            benefit4Desc: '100% reciclable y ambientalmente responsable.',
            ctaTitle: 'Proteja Su Propiedad',
            ctaSubtitle: 'Obtenga una evaluación gratuita para su proyecto de techado.',
        },
        fr: {
            title: 'Toiture EPDM Caoutchouc',
            subtitle: 'Solutions d\'Étanchéité Industrielle',
            description: 'Protégez votre propriété avec notre membrane EPDM premium. Offrant 50+ ans de durabilité et une protection étanche complète.',
            heroTitle: 'Protection Ultime de Toiture',
            heroSubtitle: 'Membrane EPDM pour une durabilité durable',
            benefit1Title: 'Durée de Vie 50 Ans',
            benefit1Desc: 'Durabilité leader de l\'industrie avec exigences minimales d\'entretien.',
            benefit2Title: 'Étanchéité Complète',
            benefit2Desc: 'Technologie de membrane sans couture élimine les points de fuite.',
            benefit3Title: 'Résistant aux Intempéries',
            benefit3Desc: 'Résiste aux températures extrêmes, rayons UV et conditions météo.',
            benefit4Title: 'Matériau Écologique',
            benefit4Desc: '100% recyclable et responsable envers l\'environnement.',
            ctaTitle: 'Protégez Votre Propriété',
            ctaSubtitle: 'Obtenez une évaluation gratuite pour votre projet de toiture.',
        }
    },

    // Joinery Page
    joinery: {
        en: {
            title: 'Aluminum Joinery & Glazing',
            subtitle: 'Precision-Engineered Windows & Doors',
            description: 'Transform your space with our premium aluminum joinery. Superior thermal performance, modern aesthetics, and exceptional durability.',
            heroTitle: 'Modern Excellence in Every Detail',
            heroSubtitle: 'Premium aluminum windows and doors for contemporary architecture',
            benefit1Title: 'Thermal Efficiency',
            benefit1Desc: 'Advanced thermal break technology for optimal energy savings.',
            benefit2Title: 'Modern Design',
            benefit2Desc: 'Sleek profiles and clean lines for contemporary aesthetics.',
            benefit3Title: 'Durability',
            benefit3Desc: 'Corrosion-resistant aluminum built to last decades.',
            benefit4Title: 'Security',
            benefit4Desc: 'Multi-point locking systems for enhanced protection.',
            ctaTitle: 'Upgrade Your Windows & Doors',
            ctaSubtitle: 'Get a free consultation for your joinery project.',
        },
        nl: {
            title: 'Aluminium Schrijnwerk & Beglazing',
            subtitle: 'Precisie-ontworpen Ramen & Deuren',
            description: 'Transformeer uw ruimte met ons premium aluminium schrijnwerk. Superieure thermische prestaties, moderne esthetiek en uitzonderlijke duurzaamheid.',
            heroTitle: 'Moderne Excellentie in Elk Detail',
            heroSubtitle: 'Premium aluminium ramen en deuren voor hedendaagse architectuur',
            benefit1Title: 'Thermische Efficiëntie',
            benefit1Desc: 'Geavanceerde thermische onderbreking voor optimale energiebesparing.',
            benefit2Title: 'Modern Ontwerp',
            benefit2Desc: 'Slanke profielen en strakke lijnen voor hedendaagse esthetiek.',
            benefit3Title: 'Duurzaamheid',
            benefit3Desc: 'Corrosiebestendig aluminium gebouwd om decennia mee te gaan.',
            benefit4Title: 'Veiligheid',
            benefit4Desc: 'Meerpuntssluitsystemen voor verbeterde bescherming.',
            ctaTitle: 'Upgrade Uw Ramen & Deuren',
            ctaSubtitle: 'Ontvang een gratis adviesgesprek voor uw schrijnwerkproject.',
        },
        es: {
            title: 'Carpintería de Aluminio y Acristalamiento',
            subtitle: 'Ventanas y Puertas de Precisión',
            description: 'Transforme su espacio con nuestra carpintería de aluminio premium. Rendimiento térmico superior, estética moderna y durabilidad excepcional.',
            heroTitle: 'Excelencia Moderna en Cada Detalle',
            heroSubtitle: 'Ventanas y puertas de aluminio premium para arquitectura contemporánea',
            benefit1Title: 'Eficiencia Térmica',
            benefit1Desc: 'Tecnología de rotura de puente térmico para ahorro óptimo de energía.',
            benefit2Title: 'Diseño Moderno',
            benefit2Desc: 'Perfiles elegantes y líneas limpias para estética contemporánea.',
            benefit3Title: 'Durabilidad',
            benefit3Desc: 'Aluminio resistente a la corrosión construido para durar décadas.',
            benefit4Title: 'Seguridad',
            benefit4Desc: 'Sistemas de cierre multipunto para protección mejorada.',
            ctaTitle: 'Actualice Sus Ventanas y Puertas',
            ctaSubtitle: 'Obtenga una consulta gratuita para su proyecto de carpintería.',
        },
        fr: {
            title: 'Menuiserie Aluminium & Vitrage',
            subtitle: 'Fenêtres et Portes de Précision',
            description: 'Transformez votre espace avec notre menuiserie aluminium premium. Performance thermique supérieure, esthétique moderne et durabilité exceptionnelle.',
            heroTitle: 'Excellence Moderne dans Chaque Détail',
            heroSubtitle: 'Fenêtres et portes aluminium premium pour architecture contemporaine',
            benefit1Title: 'Efficacité Thermique',
            benefit1Desc: 'Technologie de rupture de pont thermique pour économies d\'énergie optimales.',
            benefit2Title: 'Design Moderne',
            benefit2Desc: 'Profilés élégants et lignes épurées pour esthétique contemporaine.',
            benefit3Title: 'Durabilité',
            benefit3Desc: 'Aluminium résistant à la corrosion construit pour durer des décennies.',
            benefit4Title: 'Sécurité',
            benefit4Desc: 'Systèmes de verrouillage multipoints pour protection renforcée.',
            ctaTitle: 'Améliorez Vos Fenêtres et Portes',
            ctaSubtitle: 'Obtenez une consultation gratuite pour votre projet de menuiserie.',
        }
    },

    // Furniture Page
    furniture: {
        en: {
            title: 'Bespoke Furniture & Doors',
            subtitle: 'Custom Craftsmanship for Your Vision',
            description: 'Elevate your interiors with our handcrafted bespoke furniture. Each piece is designed and built to your exact specifications.',
            heroTitle: 'Crafted for Perfection',
            heroSubtitle: 'Bespoke furniture designed for your unique space',
            benefit1Title: 'Custom Design',
            benefit1Desc: 'Every piece tailored to your exact specifications and preferences.',
            benefit2Title: 'Premium Materials',
            benefit2Desc: 'Only the finest woods and materials for lasting quality.',
            benefit3Title: 'Master Craftsmanship',
            benefit3Desc: 'Created by skilled artisans with decades of experience.',
            benefit4Title: 'Unique Pieces',
            benefit4Desc: 'One-of-a-kind furniture that reflects your personal style.',
            ctaTitle: 'Create Your Perfect Piece',
            ctaSubtitle: 'Get a free consultation for your custom furniture project.',
        },
        nl: {
            title: 'Maatwerk Meubels & Deuren',
            subtitle: 'Vakmanschap op Maat voor Uw Visie',
            description: 'Verhoog uw interieur met onze handgemaakte maatwerkmeubels. Elk stuk is ontworpen en gebouwd volgens uw exacte specificaties.',
            heroTitle: 'Gemaakt voor Perfectie',
            heroSubtitle: 'Maatwerkmeubels ontworpen voor uw unieke ruimte',
            benefit1Title: 'Maatwerk Ontwerp',
            benefit1Desc: 'Elk stuk op maat gemaakt volgens uw exacte specificaties en voorkeuren.',
            benefit2Title: 'Premium Materialen',
            benefit2Desc: 'Alleen de fijnste houtsoorten en materialen voor blijvende kwaliteit.',
            benefit3Title: 'Meester Vakmanschap',
            benefit3Desc: 'Gecreëerd door bekwame ambachtslieden met tientallen jaren ervaring.',
            benefit4Title: 'Unieke Stukken',
            benefit4Desc: 'Eenmalige meubels die uw persoonlijke stijl weerspiegelen.',
            ctaTitle: 'Creëer Uw Perfecte Stuk',
            ctaSubtitle: 'Ontvang een gratis adviesgesprek voor uw maatwerkmeubelsproject.',
        },
        es: {
            title: 'Muebles y Puertas a Medida',
            subtitle: 'Artesanía Personalizada para Su Visión',
            description: 'Eleve sus interiores con nuestros muebles artesanales a medida. Cada pieza está diseñada y construida según sus especificaciones exactas.',
            heroTitle: 'Creado para la Perfección',
            heroSubtitle: 'Muebles a medida diseñados para su espacio único',
            benefit1Title: 'Diseño Personalizado',
            benefit1Desc: 'Cada pieza adaptada a sus especificaciones y preferencias exactas.',
            benefit2Title: 'Materiales Premium',
            benefit2Desc: 'Solo las maderas y materiales más finos para calidad duradera.',
            benefit3Title: 'Maestría Artesanal',
            benefit3Desc: 'Creado por artesanos expertos con décadas de experiencia.',
            benefit4Title: 'Piezas Únicas',
            benefit4Desc: 'Muebles únicos que reflejan su estilo personal.',
            ctaTitle: 'Cree Su Pieza Perfecta',
            ctaSubtitle: 'Obtenga una consulta gratuita para su proyecto de muebles personalizados.',
        },
        fr: {
            title: 'Mobilier et Portes Sur Mesure',
            subtitle: 'Artisanat Personnalisé pour Votre Vision',
            description: 'Élevez vos intérieurs avec notre mobilier artisanal sur mesure. Chaque pièce est conçue et construite selon vos spécifications exactes.',
            heroTitle: 'Créé pour la Perfection',
            heroSubtitle: 'Mobilier sur mesure conçu pour votre espace unique',
            benefit1Title: 'Design Sur Mesure',
            benefit1Desc: 'Chaque pièce adaptée à vos spécifications et préférences exactes.',
            benefit2Title: 'Matériaux Premium',
            benefit2Desc: 'Seulement les bois et matériaux les plus fins pour une qualité durable.',
            benefit3Title: 'Maîtrise Artisanale',
            benefit3Desc: 'Créé par des artisans qualifiés avec des décennies d\'expérience.',
            benefit4Title: 'Pièces Uniques',
            benefit4Desc: 'Mobilier unique qui reflète votre style personnel.',
            ctaTitle: 'Créez Votre Pièce Parfaite',
            ctaSubtitle: 'Obtenez une consultation gratuite pour votre projet de mobilier personnalisé.',
        }
    }
};

const languageNames = {
    en: 'English',
    nl: 'Nederlands',
    es: 'Español',
    fr: 'Français'
};

const languageFlags = {
    en: 'flags/gb.svg',
    nl: 'flags/nl.svg',
    es: 'flags/es.svg',
    fr: 'flags/fr.svg'
};

// Get current language from localStorage
function getCurrentLanguage() {
    return localStorage.getItem('language') || 'en';
}

// Set language and save to localStorage
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    applyTranslations();
    updateLanguageSelector();
}

// Apply translations to the page
function applyTranslations() {
    const lang = getCurrentLanguage();
    const page = getPageName();

    // Update navigation
    const navTranslations = serviceTranslations.nav[lang];
    document.querySelectorAll('[data-translate="nav-home"]').forEach(el => el.textContent = navTranslations.home);
    document.querySelectorAll('[data-translate="nav-services"]').forEach(el => el.textContent = navTranslations.services);
    document.querySelectorAll('[data-translate="nav-portfolio"]').forEach(el => el.textContent = navTranslations.portfolio);
    document.querySelectorAll('[data-translate="nav-contact"]').forEach(el => el.textContent = navTranslations.contact);
    document.querySelectorAll('[data-translate="nav-getQuote"]').forEach(el => el.textContent = navTranslations.getQuote);

    // Update common elements
    const commonTranslations = serviceTranslations.common[lang];
    Object.keys(commonTranslations).forEach(key => {
        document.querySelectorAll(`[data-translate="common-${key}"]`).forEach(el => el.textContent = commonTranslations[key]);
    });

    // Update page-specific content using page-prefixed keys (e.g., solar-title, roofing-description)
    if (serviceTranslations[page] && serviceTranslations[page][lang]) {
        const pageTranslations = serviceTranslations[page][lang];
        Object.keys(pageTranslations).forEach(key => {
            // Match both regular keys (e.g., "title") and prefixed keys (e.g., "solar-title")
            document.querySelectorAll(`[data-translate="${key}"]`).forEach(el => el.textContent = pageTranslations[key]);
            document.querySelectorAll(`[data-translate="${page}-${key}"]`).forEach(el => el.textContent = pageTranslations[key]);
        });
    }

    // Update page title
    if (serviceTranslations[page] && serviceTranslations[page][lang] && serviceTranslations[page][lang].title) {
        document.title = `OX Services - ${serviceTranslations[page][lang].title}`;
    }
}

// Get current page name from URL
function getPageName() {
    const path = window.location.pathname;
    if (path.includes('solar')) return 'solar';
    if (path.includes('roofing')) return 'roofing';
    if (path.includes('joinery')) return 'joinery';
    if (path.includes('furniture')) return 'furniture';
    return '';
}

// Create and update language selector
function createLanguageSelector() {
    const container = document.getElementById('language-selector-container');
    const mobileContainer = document.getElementById('language-selector-container-mobile');
    const currentLang = getCurrentLanguage();

    const selectorHTML = `
        <div class="relative" id="lang-dropdown">
            <button onclick="toggleLanguageDropdown()" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-white/10 transition-colors text-white">
                <span class="material-symbols-outlined text-xl">translate</span>
                <span class="hidden sm:inline text-sm font-medium">${languageNames[currentLang]}</span>
                <span class="material-symbols-outlined text-sm">expand_more</span>
            </button>
            <div id="lang-dropdown-menu" class="hidden absolute right-0 mt-2 w-40 bg-white dark:bg-[#1a2629] rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50">
                ${['en', 'nl', 'es', 'fr'].map(lang => `
                    <button onclick="setLanguage('${lang}')" class="w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-white/5 transition-colors ${currentLang === lang ? 'bg-gray-100 dark:bg-white/10' : ''}">
                        <img src="${languageFlags[lang]}" alt="${languageNames[lang]}" class="w-5 h-3.5 object-cover rounded-sm shadow-sm">
                        <span class="text-sm font-medium text-primary dark:text-white">${languageNames[lang]}</span>
                        ${currentLang === lang ? '<span class="material-symbols-outlined text-primary dark:text-white text-sm ml-auto">check</span>' : ''}
                    </button>
                `).join('')}
            </div>
        </div>
    `;

    const mobileSelectorHTML = `
        <div class="relative" id="lang-dropdown-mobile">
            <button onclick="toggleMobileLanguageDropdown()" class="flex items-center gap-1 px-2 py-1 rounded-lg hover:bg-white/10 transition-colors text-white">
                <span class="material-symbols-outlined text-xl">translate</span>
                <span class="material-symbols-outlined text-sm">expand_more</span>
            </button>
            <div id="lang-dropdown-menu-mobile" class="hidden absolute right-0 mt-2 w-40 bg-white dark:bg-[#1a2629] rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50">
                ${['en', 'nl', 'es', 'fr'].map(lang => `
                    <button onclick="setLanguage('${lang}')" class="w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-white/5 transition-colors ${currentLang === lang ? 'bg-gray-100 dark:bg-white/10' : ''}">
                        <img src="${languageFlags[lang]}" alt="${languageNames[lang]}" class="w-5 h-3.5 object-cover rounded-sm shadow-sm">
                        <span class="text-sm font-medium text-primary dark:text-white">${languageNames[lang]}</span>
                        ${currentLang === lang ? '<span class="material-symbols-outlined text-primary dark:text-white text-sm ml-auto">check</span>' : ''}
                    </button>
                `).join('')}
            </div>
        </div>
    `;

    if (container) container.innerHTML = selectorHTML;
    if (mobileContainer) mobileContainer.innerHTML = mobileSelectorHTML;
}

function toggleLanguageDropdown() {
    const menu = document.getElementById('lang-dropdown-menu');
    const mobileMenu = document.getElementById('lang-dropdown-menu-mobile');
    if (menu) menu.classList.toggle('hidden');
    if (mobileMenu) mobileMenu.classList.add('hidden');
}

function toggleMobileLanguageDropdown() {
    const menu = document.getElementById('lang-dropdown-menu-mobile');
    const desktopMenu = document.getElementById('lang-dropdown-menu');
    if (menu) menu.classList.toggle('hidden');
    if (desktopMenu) desktopMenu.classList.add('hidden');
}

function updateLanguageSelector() {
    createLanguageSelector();
}

// Close dropdown when clicking outside
document.addEventListener('click', function (event) {
    const dropdown = document.getElementById('lang-dropdown');
    const mobileDropdown = document.getElementById('lang-dropdown-mobile');

    if (dropdown && !dropdown.contains(event.target)) {
        const menu = document.getElementById('lang-dropdown-menu');
        if (menu) menu.classList.add('hidden');
    }

    if (mobileDropdown && !mobileDropdown.contains(event.target)) {
        const mobileMenu = document.getElementById('lang-dropdown-menu-mobile');
        if (mobileMenu) mobileMenu.classList.add('hidden');
    }
});

// Initialize on page load
document.addEventListener('DOMContentLoaded', function () {
    createLanguageSelector();
    applyTranslations();
});
